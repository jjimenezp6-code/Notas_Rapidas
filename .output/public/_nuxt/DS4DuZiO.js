import{e as M,r as N,f as v,c as l,o as s,n as I,g as $,a,b as D,t as h,h as L,i as m,F as T,j as A,_ as S,k as P,l as V,v as z,w as B,m as E,T as F,p as q}from"#entry";import{C as U,u as G}from"./4Erf9eH_.js";const H={key:0,class:"absolute top-2 left-2 z-10 rounded-md px-2 py-[2px] text-[10px] font-semibold bg-yellow-400 text-black ring-1 ring-black/10 select-none pointer-events-none shadow-sm"},J={class:"flex gap-1"},O={class:"pt-10"},Q={class:"mt-3 flex flex-wrap items-center gap-2 text-[11px]"},K={class:"ml-auto opacity-60"},R=M({__name:"NoteCard",props:{note:{},compact:{type:Boolean}},emits:["togglePin","delete"],setup(i,{emit:g}){const n=i,p=g,c=()=>I(`/nota/${n.note.id}`),d=()=>p("togglePin",n.note.id),w=N(!1),_=()=>{w.value=!0},k=()=>p("delete",n.note.id),b=v(()=>{const C=(n.note.updatedAt??n.note.createdAt)||Date.now(),u=Date.now()-C,r=Math.floor(u/1e3);if(r<60)return"hace unos segundos";const x=Math.floor(r/60);if(x<60)return`hace ${x} min`;const f=Math.floor(x/60);if(f<24)return`hace ${f} h`;const y=Math.floor(f/24);return y<7?`hace ${y} d`:new Date(C).toLocaleDateString()});return(C,u)=>(s(),l("article",{class:"note-card group cursor-pointer overflow-hidden relative p-3",onClick:c},[i.note.pinned?(s(),l("span",H," FIJADA ")):$("",!0),a("div",{class:"absolute top-2 right-2 z-20 flex flex-col items-end gap-1 md:opacity-0 md:group-hover:opacity-100 transition duration-150",onClick:u[0]||(u[0]=L(()=>{},["stop"]))},[a("div",J,[a("button",{class:"rounded-lg px-2 py-[2px] text-[11px] bg-black/5 text-black hover:bg-black/10 dark:bg-white/10 dark:text-white dark:hover:bg-white/20 transition",onClick:d},h(i.note.pinned?"üìå Quitar":"üìç Fijar"),1),a("button",{class:"rounded-lg px-2 py-[2px] text-[11px] bg-black/5 text-black hover:bg-black/10 dark:bg-white/10 dark:text-white dark:hover:bg-white/20 transition",onClick:c}," ‚úèÔ∏è ")]),a("button",{class:"rounded-lg px-2 py-[2px] text-[11px] bg-red-500/90 text-white hover:bg-red-600 transition",onClick:_}," üóëÔ∏è ")]),a("div",O,[a("h3",{class:m(["note-title pr-24 font-medium",i.compact?"line-clamp-1 text-[14px]":"line-clamp-2 text-[16px]"])},h(i.note.title||"Sin t√≠tulo"),3),a("p",{class:m(["note-content mt-2 whitespace-pre-wrap text-[13px]",i.compact?"line-clamp-2":"line-clamp-4"])},h(i.note.content||"‚Äî"),3),a("div",Q,[(s(!0),l(T,null,A(i.note.tags||[],r=>(s(),l("span",{key:r,class:"note-tag"},"#"+h(r),1))),128)),a("span",K,h(b.value),1)])]),D(U,{open:w.value,"onUpdate:open":u[1]||(u[1]=r=>w.value=r),title:"Eliminar nota",message:`¬øEliminar la nota ¬´${i.note.title||"Sin t√≠tulo"}¬ª?`,"confirm-text":"Eliminar","cancel-text":"Cancelar",variant:"danger",onConfirm:k},null,8,["open","message"])]))}}),j=S(R,[["__scopeId","data-v-65494ba8"]]),W=M({__name:"FabNew",setup(i){return(g,n)=>(s(),l("button",{class:"fab inline-flex items-center justify-center h-14 w-14 rounded-2xl bg-yellow-400 text-black shadow-[0_12px_30px_rgba(0,0,0,0.18)] hover:shadow-[0_16px_40px_rgba(0,0,0,0.22)] active:scale-95 transition-transform duration-150",onClick:n[0]||(n[0]=p=>g.$emit("click")),"aria-label":"Nueva nota",title:"Nueva nota"},[...n[1]||(n[1]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-7 w-7",viewBox:"0 0 24 24",fill:"currentColor"},[a("path",{d:"M11 5a1 1 0 1 1 2 0v6h6a1 1 0 1 1 0 2h-6v6a1 1 0 1 1-2 0v-6H5a1 1 0 1 1 0-2h6z"})],-1)])]))}}),X=S(W,[["__scopeId","data-v-20741858"]]),Y={class:"space-y-6"},Z={class:"card p-4 flex flex-col gap-3 md:flex-row md:items-center"},ee={class:"flex items-center gap-2 order-3 md:order-none"},te={class:"card p-4"},ae={class:"flex items-center gap-2 flex-wrap"},oe=["onClick"],ne={key:0},se={key:1},le={key:2,class:"card p-10 text-center text-neutral-500"},ie=M({__name:"index",setup(i){const{push:g}=q(),n=G(),p=N(""),c=N(""),d=N(!1),w=v(()=>n.loaded);P(async()=>{n.loaded||await n.load();const o=localStorage.getItem("ui:compact");d.value=o==="1"});const _=v(()=>{let o=n.notes.slice();if(p.value.trim()){const e=p.value.toLowerCase();o=o.filter(t=>(t.title||"").toLowerCase().includes(e)||(t.content||"").toLowerCase().includes(e))}return c.value&&(o=o.filter(e=>(e.tags||[]).includes(c.value))),o.sort((e,t)=>(t.pinned?1:0)-(e.pinned?1:0)||(t.updatedAt??t.createdAt)-(e.updatedAt??e.createdAt))}),k=v(()=>_.value.filter(o=>o.pinned)),b=v(()=>_.value.filter(o=>!o.pinned)),C=v(()=>{const o=new Set;return n.notes.forEach(e=>(e.tags||[]).forEach(t=>o.add(t))),Array.from(o).sort((e,t)=>e.localeCompare(t))}),u=async()=>{await I("/nota/new")},r=async o=>{await n.togglePin(o);const e=await n.get(o);g(e?.pinned?"Nota fijada":"Nota desfijada","info")},x=async o=>{await n.remove(o),g("Nota eliminada","error")},f=o=>{d.value=o,localStorage.setItem("ui:compact",o?"1":"0")},y=v(()=>d.value?"grid gap-2 grid-cols-2 sm:grid-cols-3 lg:grid-cols-4":"grid gap-3 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3");return(o,e)=>(s(),l("div",Y,[a("div",Z,[V(a("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>p.value=t),type:"text",placeholder:"Buscar notas‚Ä¶",class:"input w-full md:flex-1"},null,512),[[z,p.value]]),a("div",ee,[e[4]||(e[4]=a("span",{class:"text-xs opacity-70"},"Vista:",-1)),a("span",{class:m(["chip",d.value?"":"active"]),onClick:e[1]||(e[1]=t=>f(!1))},"Normal",2),a("span",{class:m(["chip",d.value?"active":""]),onClick:e[2]||(e[2]=t=>f(!0))},"Compacta",2)]),a("button",{class:"btn btn-primary md:ml-auto",onClick:u},"Nueva")]),a("div",te,[a("div",ae,[a("span",{class:m(["chip",c.value===""?"active":""]),onClick:e[3]||(e[3]=t=>c.value="")},"Etiquetas",2),(s(!0),l(T,null,A(C.value,t=>(s(),l("span",{key:t,class:m(["chip",c.value===t?"active":""]),onClick:re=>c.value=t}," #"+h(t),11,oe))),128))])]),k.value.length?(s(),l("section",ne,[e[5]||(e[5]=a("h2",{class:"text-sm uppercase tracking-wide text-neutral-500 mb-2"},"Fijadas",-1)),D(F,{name:"list-fade",tag:"div",class:m(y.value)},{default:B(()=>[(s(!0),l(T,null,A(k.value,t=>(s(),E(j,{key:t.id,note:t,compact:d.value,onTogglePin:r,onDelete:x},null,8,["note","compact"]))),128))]),_:1},8,["class"])])):$("",!0),b.value.length?(s(),l("section",se,[e[6]||(e[6]=a("h2",{class:"text-sm uppercase tracking-wide text-neutral-500 mb-2"},"Todas",-1)),D(F,{name:"list-fade",tag:"div",class:m(y.value)},{default:B(()=>[(s(!0),l(T,null,A(b.value,t=>(s(),E(j,{key:t.id,note:t,compact:d.value,onTogglePin:r,onDelete:x},null,8,["note","compact"]))),128))]),_:1},8,["class"])])):$("",!0),w.value&&k.value.length===0&&b.value.length===0?(s(),l("div",le," No hay notas a√∫n. Crea tu primera nota. ")):$("",!0),D(X,{class:"md:hidden",onClick:u})]))}}),ue=S(ie,[["__scopeId","data-v-aa07e51a"]]);export{ue as default};
